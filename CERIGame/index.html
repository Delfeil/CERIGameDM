<!doctype html>
<html lang="fr" ng-app="main">
	<head>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
		<link rel="stylesheet" type="text/css" href="css/main.css">

		<script type="text/javascript">
			var path='/home/nas02a/etudiants/inf/uapv1602054/CERIGAme/CERIGame/'
		</script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular-route.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
		
		<script src="app/controllers/controller.js"></script>
		<script src="app/services/services.js"></script>
		<script src="app/app.js"></script>

		<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
	</head>
	<body ng-controller="main_controller">
		<!--<div class="contener" ng-controller="bandeau_controller">-->
		<div class="contener" ng-hide="no_logged_in" ng-show="isLoggedIn()">
			<div class="bandeau row">
				<span class="colonne_Logo col-3" ng-click="loadAcceuil()">
    				<img class="logo pointer" src="http://www.photonstorm.com/wp-content/uploads/2011/09/step2.gif">
    			</span>
    			<span class="colonne col-2">
    				<input class="btn btn-primary pointer" type="button" ng-click="loadQuizz()" value="Quizzs">
    			</span>
    			<span class="colonne col-3" id="bandeau-message">
					<img class="image_bandeau" src={{user.avatar}}>
    			</span>
    			<span class="colonne col-2" id="bandeau-nom">
    				<a class="pointer" ng-click="loadUser()" id="user-show"> {{ user.username }} </a>
    			</span>
    			<span class="colonne col-2 ">
    				<form ng-submit="logOut()">
    					<input class="deconnect btn btn-primary pointer" id="deconnect" type="submit" value="deconnexion">
	    			</form>
    			</span>
  			</div>
  		</div>

  		<div class="contener" ng-controller="bandeau_controller">
  			<div class="row {{message.class}}" id="bandeau-controlled-message">{{message.msg}}</div>
  		</div>

  		<div ng-show="showUser">
	  		<div class="texte-user bandeau user" ng-controller="user_controller">
	  			<div class="row">
		  			<div class="colonne col-6"> 
		  				<img class="image_avatar" ng-src="{{user.avatar}}">
		  			</div>
					<div class="colonne col-6" > 
						<span class="row">
			  				Pseudo : {{user.username}}
			  			</span>
			  			<span class="row">
			  				Nom : {{user.name}}
			  			</span>
			  			<span class="row">
			  				Prenom : {{user.firstName}}
			  			</span>
		  			</div>
	  			</div>
				<div>
					Meilleurs Scores : 
					<div class="row list head">
						<span class="texte-user titre colonne col-5">
							Date
						</span>
						<span class="texte-user titre colonne col-5">
							Score
						</span>
						<span class="texte-user titre colonne col-2">
							Nombre de réponse
						</span>
					</div>
					<div class= "quizz-tableau" >
						<div class="meileurScore-list" ng-repeat="score in bestScores">
							<div class="Score-infos row">
								<span class="texte-user colonne col-5">
									{{ score['date'] }}
								</span>
								<span class="texte-user colonne col-5">
									{{ score['score'] }}
								</span>
								<span class="texte-user colonne col-2">
									{{ score['nbreponse'] }}
								</span>
							</div>
						</div>
					</div>
				</div>
				<div>
					Score total : {{sumScore}}
				</div>
	  			<!-- Test controleur requetes -->
	  			<!-- <div ng-click="getBest()">Les meilleurs scores</div> -->
	  			<!-- <div ng-click="getsumScore()">Le score total</div> -->
	  			<div class="form-modif">
		  			<form class= "form-modif-user" name="modif-user-form" ng-submit="modifUser()">
				  		<div class="form-row">
				    		<div class="col">	
								<input class="form-control" id='identifiant' type="texte" placeholder="identifiant" name="identifiant" ng-model="identifiant" value="{{user.username}}">
							</div>
							<div class="col">	
								<input class="form-control" id='nom' type="texte" placeholder="nom" name="nom" ng-model="nom" value="{{user.name}}">
							</div>
							<div class="col">	
								<input class="form-control" id='prenom' type="texte" placeholder="prenom" name="prenom" ng-model="prenom" value="{{user.firstName}}">
							</div>
							<div class="col">	
								<input class="form-control" id='avatar' type="texte" placeholder="avatar" name="avatar" ng-model="avatar" value="{{user.avatar}}">
							</div>
							<div class="col">
								<input class="modif-user btn btn-primary pointer" id="modif-user" type="submit" value="Modifier">
							</div>
						</div>
					</form>
				</div>
	  		</div>
	  	</div>
	  	
	  	<!--
	  		-------------------------------
	  		Partie quizzs 
	  		-------------------------------
	  	 -->
  		<div ng-show="showQuizz">
	  		<div class="bandeau quizz" ng-controller="quizz_controller">
	  			<div ng-show="searchQuizz">
	  				<div class="select-difficilte selection">
	  					<span class="difficulte ">
	  						<input class="btn btn-primary" type="button" ng-click="setDifficulte('facile')" value="Facile">
							<!--Facile-->
	  					</span>
	  					<span class="difficulte ">
							<input class="btn btn-primary" type="button" ng-click="setDifficulte('normal')" value="Normale">
	  						<!--Normal-->
	  					</span>
	  					<span class="difficulte ">
							<input class="btn btn-primary" type="button" ng-click="setDifficulte('difficile')" value="Difficile">
	  						<!--Difficile-->
	  					</span>
	  				</div>
					<div class="quizz-search">
			  			<input class="btn btn-primary pointer" type="button" ng-click="getQuizzes()" value="Afficher tous les quizzs">
						<!--{{ quizzs }}-->
					</div>
					<div class="texte-quizz titre row list head" ng-show="quizzs">
						<span class="colonne col-6 quizz-name">
							Thème
						</span>
						<span class="colonne col-6 quizz-redacteur">
							Rédacteur
						</span>
					</div>
					<div ng-show="quizzs">
						<div class= "quizz-tableau " >
							<div class="quizz-list" ng-repeat="quizz in quizzs">
								<!--C'est le quizz: {{ quizz }}-->

								<div class="quizz-infos row" ng-click="playQuizz(quizz, 'facile')">
									<div class="texte-quizz colonne col-6 quizz-name">
										{{ quizz['thème'] }}
									</div>
									<div class="texte-quizz colonne col-6 quizz-redacteur">
										{{ quizz['rédacteur'] }}
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div ng-show="questionQuizz">
					<div class="timer">
						{{ nbH }} : {{ nbM }} : {{ nbS }}
					</div>
					<div class="row texte-quizz colonne col-12 quizz-name">
						{{ quizz['thème'] }}
					</div>
					<div class="quizz-question">
						<div class="texte-question colonne col-12 row question">
							{{ question['question'] }}
						</div>
						<div class="propositions"  ng-repeat="proposition in questionAffiche">
							<span class="texte-question colonne col-12 row proposition-elem" ng-click="reponse(proposition)">
								{{ proposition }}
							</span>
						</div>
					</div>
				</div>

				<div ng-show="showEnd">
					<div class="resultat">
						<span>
							score : 
						</span>
						<span>
							{{ score }}
						</span>
					</div>
					<div ng-click="reset()">
						Rejouer
					</div>
				</div>
			</div>
		</div>
		<!-- 
			-------------------------------
			Fin partie quizzs
			-------------------------------
		 -->

		 <!-- 
			-------------------------------
			partie Acceuil
			-------------------------------
		 -->
		 <div ng-show="showAcceuil">
		 		<div class="bandeau quizz" ng-controller="accueil_controller">
		 			<div class="Top10Best">
		 				<div class="Top-10-best-title">
		 					Les 10 meuilleurs scores
		 				</div>
		 				<div class="Top-10-label">
		 					<span class="user-logo">
		 						Avatar
		 					</span>
		 					<span class="user-identifiant">
		 						identifiant
		 					</span>
		 					<span class="user_score">
		 						Meilleur score
		 					</span>
		 				</div>
		 				<div class="listUser" ng-repeat="user in tot10Best">
		 					<span class="user-logo">
		 						<img class="image_avatar pointer" src={{user.avatar}}>
		 					</span>
		 					<span class="user-identifiant">
		 						{{user.identifiant}}
		 					</span>
		 					<span class="user_score">
		 						{{user.score}}
		 					</span>
		 				</div>
		 			</div>
		 			<div class="Top-10-sum">
		 				<div class="Top-10-best-title">
		 					Les 10 meuilleurs scores cumulés
		 				</div>
		 				<div class="Top-10-label">
		 					<span class="user-logo">
		 						Avatar
		 					</span>
		 					<span class="user-identifiant">
		 						identifiant
		 					</span>
		 					<span class="user_score">
		 						somme_score
		 					</span>
		 				</div>
		 				<div class="listUser" ng-repeat="user in tot10Sum">
		 					<span class="user-logo">
		 						<img class="image_avatar pointer" src={{user.avatar}}>
		 					</span>
		 					<span class="user-identifiant">
		 						{{user.identifiant}}
		 					</span>
		 					<span class="user_score">
		 						{{user.somme_score}}
		 					</span>
		 				</div>
		 			</div>
		 		</div>
		 </div>
		 <!-- 
			-------------------------------
			Fin partie Acceuil
			-------------------------------
		 -->

  		<div class="contener">
  			<div class="row {{ classBandeau }}" id="bandeau-message">{{ textBandeau }}</div>
  		</div>
		<form class= "form-signin" name="login-form" ng-submit="login()" ng-show="no_logged_in" ng-show="notLoggedIn()">
			<h1 class="text-center">WARNING!</h1>
			<p class="text-center" id="message-connect">Veuillez-vous identifier</p>

			<div class="form-row">
	    		<div class="col">	
					<input class="form-control" id='login' type="texte" placeholder="Login" name="login" ng-model="username">
				</div>
				<div class="col">	
					<input class="form-control" id='password' type="password" placeholder="mdp" name="mdp" ng-model="password">
				</div>
				<div class="col">
					<input class="bouton_connect btn btn-primary" id="connect" type="submit" value="connexion">
				</div>
			</div>
		</form>
	</body>
	<script type="text/javascript">
		// $('#connect').on('click', function(){
		// 	var username = $('#login').val();
		// 	var mdp = $('#password').val();
		// 	console.log("Event click connect:login:", username, " mdp:", mdp);
		// 	angular.element($("body")).scope().username = username;
		// 	angular.element($("body")).scope().password = mdp;
		// 	// $.ajax({
		// 	// 	type: 'GET',
		// 	// 	url: '/login?login=' + login + '&mdp=' + mdp,
		// 	// }).done(function(data) {
		// 	// 	console.log("result:", data);
		// 	// });
		// });
	</script>
</html>